

This project demonstrates how to analyze the [Chinook SQLite database](https://github.com/lerocha/chinook-database) using Python and pandas. The notebook connects to the database, explores its schema, and runs various SQL queries to answer business questions about customers, invoices, employees, tracks, artists, and playlists.

## Setup

- Requires Python, pandas, and sqlite3.
- Download the `chinook.db` file and update the path in the notebook if needed.

## Sections

### 1. Import Libraries & Connect to Database

The notebook imports `pandas`, `sqlite3`, and `os`, then connects to the Chinook database file.

### 2. Helper Function for SQL Queries

Defines a function `sq(q)` to run SQL queries and return cleaned pandas DataFrames. Column names are formatted for readability.

### 3. Explore Database Schema

- Lists all tables in the database.
- Shows the schema of specific tables using `PRAGMA table_info`.
- Displays sample data from tables.

### 4. Customers Not in the US

Queries for customers' full names, IDs, and countries, excluding those from the USA. Demonstrates string manipulation in SQL for proper name formatting.

### 5. Invoices for Brazilian Customers

Shows invoices for customers from Brazil, including customer name, invoice ID, date, and billing country.

### 6. Employees with Sales Agent Titles

Finds employees whose titles include "Sales Agent" using SQL `LIKE`.

### 7. Unique Billing Countries

Retrieves a list of unique billing countries from the invoice table using both `DISTINCT` and `GROUP BY`.

### 8. Invoices Associated with Sales Agents

Joins invoices, customers, and employees to show which sales agent is associated with each invoice.

### 9. Invoice, Customer, and Sales Agent Overview

Displays invoice totals, customer names, countries, and their support representatives' names and titles.

### 10. Sales by Year

Calculates the number of invoices and total sales for 2019 and 2020 using both `GROUP BY/HAVING` and `UNION ALL`.

### 11. Top Sales Agents

Finds the top 5 sales agents by total sales in 2019 and overall.

### 12. Line Items per Invoice

Shows the total quantity of items purchased for a specific invoice and for all invoices.

### 13. Track Names with Invoice Lines

Joins track and invoice_line tables to display track names with invoice line details.

### 14. Purchased Track and Artist per Invoice Line

Joins track, album, artist, and invoice_line tables to show purchased track names and artist names for each invoice line.

### 15. Revenue per Artist

Calculates total revenue generated by each artist by joining relevant tables and aggregating sales.

### 16. Number of Invoices per Country

Finds the top 5 countries with the highest number of invoices.

### 17. Tracks per Playlist

Shows the total number of tracks in each playlist, including the playlist name.

---

## Usage

Run the notebook in Jupyter or VS Code. Each section contains code and explanations for querying and analyzing the Chinook database.

---

## License

See the [Chinook Database repository](https://github.com/lerocha/chinook-database) for database licensing. This notebook is provided for educational purposes.
